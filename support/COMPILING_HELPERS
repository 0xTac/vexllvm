./autogen.sh
./configure CFLAGS=-O2 CXXFLAGS=-O2on --prefix=/usr
make -j9
cd VEX
touch priv/guest_amd64_helpers.c && make 2>&1 | grep  helpers | grep gcc | head -n1

### ADD #undef __x86_64__ to amd64 guest or else it'll try to use opcodes

# gcc -DHAVE_CONFIG_H -I. -I..  -I.. -I../include -I../VEX/pub -I../VEX/pub -DVGA_amd64=1 -DVGO_linux=1 -DVGP_amd64_linux=1 -DVGPV_amd64_linux_vanilla=1 -Ipriv  -m64 -O2 -g -std=gnu99 -Wall -Wmissing-prototypes -Wshadow -Wpointer-arith -Wstrict-prototypes -Wmissing-declarations -Wcast-align -Wcast-qual -Wwrite-strings -Wempty-body -Wformat -Wformat-security -Wignored-qualifiers -Wmissing-parameter-type -Wold-style-declaration -fno-stack-protector -fno-strict-aliasing -fno-builtin  -fomit-frame-pointer -Wbad-function-cast -fstrict-aliasing -O2 -MT priv/libvex_amd64_linux_a-guest_amd64_helpers.o -MD -MP -MF priv/.deps/libvex_amd64_linux_a-guest_amd64_helpers.Tpo -c -o priv/libvex_amd64_linux_a-guest_amd64_helpers.o `test -f 'priv/guest_amd64_helpers.c' || echo './'`priv/guest_amd64_helpers.c
 clang -emit-llvm -DHAVE_CONFIG_H -I. -I..  -I.. -I../include -I../VEX/pub -I../VEX/pub -DVGA_amd64=1 -DVGO_linux=1 -DVGP_amd64_linux=1 -DVGPV_amd64_linux_vanilla=1 -Ipriv  -m64 -O2 -g -std=gnu99 -Wall -Wmissing-prototypes -Wshadow -Wpointer-arith -Wstrict-prototypes -Wmissing-declarations -Wcast-align -Wcast-qual -Wwrite-strings -Wempty-body -Wformat -Wformat-security -Wignored-qualifiers -Wmissing-parameter-type -Wold-style-declaration -fno-stack-protector -fno-strict-aliasing -fno-builtin  -fomit-frame-pointer -Wbad-function-cast -fstrict-aliasing -O2 -MT priv/libvex_amd64_linux_a-guest_amd64_helpers.bc -MD -MP -MF priv/.deps/libvex_amd64_linux_a-guest_amd64_helpers.Tpo -c -o priv/libvex_amd64_linux_a-guest_amd64_helpers.bc `test -f 'priv/guest_amd64_helpers.c' || echo './'`priv/guest_amd64_helpers.c
touch  priv/guest_generic_x87.c && make 2>&1 | grep  generic | grep gcc | head -n1
# gcc -DHAVE_CONFIG_H -I. -I..  -I.. -I../include -I../VEX/pub -I../VEX/pub -DVGA_amd64=1 -DVGO_linux=1 -DVGP_amd64_linux=1 -DVGPV_amd64_linux_vanilla=1 -Ipriv  -m64 -O2 -g -std=gnu99 -Wall -Wmissing-prototypes -Wshadow -Wpointer-arith -Wstrict-prototypes -Wmissing-declarations -Wcast-align -Wcast-qual -Wwrite-strings -Wempty-body -Wformat -Wformat-security -Wignored-qualifiers -Wmissing-parameter-type -Wold-style-declaration -fno-stack-protector -fno-strict-aliasing -fno-builtin  -fomit-frame-pointer -Wbad-function-cast -fstrict-aliasing -O2 -MT priv/libvex_amd64_linux_a-guest_generic_x87.o -MD -MP -MF priv/.deps/libvex_amd64_linux_a-guest_generic_x87.Tpo -c -o priv/libvex_amd64_linux_a-guest_generic_x87.o `test -f 'priv/guest_generic_x87.c' || echo './'`priv/guest_generic_x87.c
clang -emit-llvm -DHAVE_CONFIG_H -I. -I..  -I.. -I../include -I../VEX/pub -I../VEX/pub -DVGA_amd64=1 -DVGO_linux=1 -DVGP_amd64_linux=1 -DVGPV_amd64_linux_vanilla=1 -Ipriv  -m64 -O2 -g -std=gnu99 -Wall -Wmissing-prototypes -Wshadow -Wpointer-arith -Wstrict-prototypes -Wmissing-declarations -Wcast-align -Wcast-qual -Wwrite-strings -Wempty-body -Wformat -Wformat-security -Wignored-qualifiers -Wmissing-parameter-type -Wold-style-declaration -fno-stack-protector -fno-strict-aliasing -fno-builtin  -fomit-frame-pointer -Wbad-function-cast -fstrict-aliasing -O2 -MT priv/libvex_amd64_linux_a-guest_generic_x87.bc -MD -MP -MF priv/.deps/libvex_amd64_linux_a-guest_generic_x87.Tpo -c -o priv/libvex_amd64_linux_a-guest_generic_x87.bc `test -f 'priv/guest_generic_x87.c' || echo './'`priv/guest_generic_x87.c
llvm-link -o libvex_amd64_helpers.debug.bc priv/*.bc
opt -O3 --strip -o libvex_amd64_helpers.bc libvex_amd64_helpers.debug.bc

rm priv/*.bc

touch priv/guest_x86_helpers.c && make 2>&1 | grep  helpers | grep gcc | head -n1
# gcc -DHAVE_CONFIG_H -I. -I..  -I.. -I../include -I../VEX/pub -I../VEX/pub -DVGA_amd64=1 -DVGO_linux=1 -DVGP_amd64_linux=1 -DVGPV_amd64_linux_vanilla=1 -Ipriv  -m64 -O2 -g -std=gnu99 -Wall -Wmissing-prototypes -Wshadow -Wpointer-arith -Wstrict-prototypes -Wmissing-declarations -Wcast-align -Wcast-qual -Wwrite-strings -Wempty-body -Wformat -Wformat-security -Wignored-qualifiers -Wmissing-parameter-type -Wold-style-declaration -fno-stack-protector -fno-strict-aliasing -fno-builtin  -fomit-frame-pointer -Wbad-function-cast -fstrict-aliasing -O2 -MT priv/libvex_amd64_linux_a-guest_x86_helpers.o -MD -MP -MF priv/.deps/libvex_amd64_linux_a-guest_x86_helpers.Tpo -c -o priv/libvex_amd64_linux_a-guest_x86_helpers.o `test -f 'priv/guest_x86_helpers.c' || echo './'`priv/guest_x86_helpers.c
clang -emit-llvm -DHAVE_CONFIG_H -I. -I..  -I.. -I../include -I../VEX/pub -I../VEX/pub -DVGA_amd64=1 -DVGO_linux=1 -DVGP_amd64_linux=1 -DVGPV_amd64_linux_vanilla=1 -Ipriv  -m64 -O2 -g -std=gnu99 -Wall -Wmissing-prototypes -Wshadow -Wpointer-arith -Wstrict-prototypes -Wmissing-declarations -Wcast-align -Wcast-qual -Wwrite-strings -Wempty-body -Wformat -Wformat-security -Wignored-qualifiers -Wmissing-parameter-type -Wold-style-declaration -fno-stack-protector -fno-strict-aliasing -fno-builtin  -fomit-frame-pointer -Wbad-function-cast -fstrict-aliasing -O2 -MT priv/libvex_amd64_linux_a-guest_x86_helpers.bc -MD -MP -MF priv/.deps/libvex_amd64_linux_a-guest_x86_helpers.Tpo -c -o priv/libvex_amd64_linux_a-guest_x86_helpers.bc `test -f 'priv/guest_x86_helpers.c' || echo './'`priv/guest_x86_helpers.c

llvm-link -o libvex_x86_helpers.debug.bc priv/*.bc
opt -O3 --strip -o libvex_x86_helpers.bc libvex_x86_helpers.debug.bc

rm priv/*.bc


touch priv/guest_arm_helpers.c && make 2>&1 | grep  helpers | grep gcc | head -n1
#gcc -DHAVE_CONFIG_H -I. -I..  -I.. -I../include -I../VEX/pub -I../VEX/pub -DVGA_amd64=1 -DVGO_linux=1 -DVGP_amd64_linux=1 -DVGPV_amd64_linux_vanilla=1 -Ipriv  -m64 -O2 -g -std=gnu99 -Wall -Wmissing-prototypes -Wshadow -Wpointer-arith -Wstrict-prototypes -Wmissing-declarations -Wcast-align -Wcast-qual -Wwrite-strings -Wempty-body -Wformat -Wformat-security -Wignored-qualifiers -Wmissing-parameter-type -Wold-style-declaration -fno-stack-protector -fno-strict-aliasing -fno-builtin  -fomit-frame-pointer -Wbad-function-cast -fstrict-aliasing -O2 -MT priv/libvex_amd64_linux_a-guest_arm_helpers.o -MD -MP -MF priv/.deps/libvex_amd64_linux_a-guest_arm_helpers.Tpo -c -o priv/libvex_amd64_linux_a-guest_arm_helpers.o `test -f 'priv/guest_arm_helpers.c' || echo './'`priv/guest_arm_helpers.c
clang -emit-llvm -DHAVE_CONFIG_H -I. -I..  -I.. -I../include -I../VEX/pub -I../VEX/pub -DVGA_amd64=1 -DVGO_linux=1 -DVGP_amd64_linux=1 -DVGPV_amd64_linux_vanilla=1 -Ipriv  -m64 -O2 -g -std=gnu99 -Wall -Wmissing-prototypes -Wshadow -Wpointer-arith -Wstrict-prototypes -Wmissing-declarations -Wcast-align -Wcast-qual -Wwrite-strings -Wempty-body -Wformat -Wformat-security -Wignored-qualifiers -Wmissing-parameter-type -Wold-style-declaration -fno-stack-protector -fno-strict-aliasing -fno-builtin  -fomit-frame-pointer -Wbad-function-cast -fstrict-aliasing -O2 -MT priv/libvex_amd64_linux_a-guest_arm_helpers.bc -MD -MP -MF priv/.deps/libvex_amd64_linux_a-guest_arm_helpers.Tpo -c -o priv/libvex_amd64_linux_a-guest_arm_helpers.bc `test -f 'priv/guest_arm_helpers.c' || echo './'`priv/guest_arm_helpers.c

opt -O3 --strip -o libvex_arm_helpers.bc priv/*.bc